# Banknota MD

Анализатор финансовых транзакций, который помогает пользователям получать информацию о расходах, кешбэке и финансовых данных на основе операций из Excel-файла. Проект разработан на Python с использованием Poetry для управления зависимостями и включает модули для обработки данных, API-интеграции и тестирования.

## Функционал

Проект предоставляет три ключевые функции:

### 1. Главная страница (`home_page`)
- **Описание**: Генерирует персонализированную сводку финансовой информации за указанный месяц.
- **Входные данные**: Строка с датой и временем в формате `YYYY-MM-DD HH:MM:SS` (например, `2021-12-31 16:44:00`).
- **Вывод**: JSON-объект, содержащий:
  - Приветствие в зависимости от времени суток ("Доброе утро", "Добрый день", "Добрый вечер", "Доброй ночи").
  - Данные о картах: общие расходы и потенциальный кешбэк (1%) по каждой карте за месяц.
  - Топ-5 транзакций по сумме за месяц (с начала месяца до указанной даты).
  - Курсы валют (USD, EUR) через API exchangerate-api.com.
  - Цены акций (AAPL, AMZN, GOOGL, MSFT, TSLA) через API alphavantage.co.
- **Модуль**: `src/views.py`.

### 2. Выгодные категории кешбэка (`get_beneficial_cashback_categories`)
- **Описание**: Анализирует транзакции за указанный месяц и вычисляет потенциальный кешбэк (1% от суммы расходов) по категориям.
- **Входные данные**: Список транзакций в формате словарей, год и месяц (например, `2021, 12`).
- **Вывод**: JSON-объект с категориями и суммами кешбэка.
- **Модуль**: `src/services.py`.

### 3. Траты по категории (`spending_by_category`)
- **Описание**: Формирует отчет о расходах по заданной категории за последние 3 месяца от указанной даты.
- **Входные данные**: DataFrame с транзакциями, название категории (например, "Супермаркеты"), дата в формате `YYYY-MM-DD`.
- **Вывод**: JSON-объект с категорией, общей суммой трат и периодом. Результат также сохраняется в файл `report_spending_by_category.json`.
- **Модуль**: `src/reports.py`.

## Требования

- Python 3.12+
- Poetry для управления зависимостями
- Файл `data/operations.xlsx` с данными о транзакциях
- Файл `user_settings.json` с настройками (список валют и акций)
- Ключи API в `.env`:
  - `API_KEY_CURRENCY` для exchangerate-api.com
  - `API_KEY_STOCKS` для alphavantage.co

## Установка

1. **Клонируйте репозиторий**:
https://github.com/Skypromd/banknota_md/tree/feature/transaction-analyzer
2. **Установите Poetry** (если не установлен):
3. **Установите зависимости**: Флаг `--no-root` указывает, что проект не 
устанавливается как пакет, а только зависимости.
4. **Настройте окружение**:
- Скопируйте `.env.example` в `.env`:
- Отредактируйте `.env`, добавив свои API-ключи:
API_KEY_CURRENCY=your_currency_api_key
API_KEY_STOCKS=your_stocks_api_key

5. **Подготовьте данные**:
- Поместите файл `operations.xlsx` в папку `data/`.
- Создайте `user_settings.json` в корне проекта, например:
```json
{
  "user_currencies": ["USD", "EUR"],
  "user_stocks": ["AAPL", "AMZN", "GOOGL", "MSFT", "TSLA"]
}


   